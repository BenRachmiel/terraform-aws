[Interface]
PrivateKey = {{ wg_keys["ec2_private"] }}
Address = {{ wg_config["ec2_ip"] }}/24
ListenPort = {{ wg_port }}

[Peer]
# K8s node 1
PublicKey = {{ wg_keys["node1_public"] }}
AllowedIPs = {{ wg_config["node1_ip"] }}/32

[Peer]
# K8s node 2
PublicKey = {{ wg_keys["node2_public"] }}
AllowedIPs = {{ wg_config["node2_ip"] }}/32

[Peer]
# K8s node 3
PublicKey = {{ wg_keys["node3_public"] }}
AllowedIPs = {{ wg_config["node3_ip"] }}/32, {{ kube_vip_ip }}/32
